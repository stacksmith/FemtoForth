cd io
U32 HIN
0 into HIN
U32 HOUT
1 into HOUT
// ---
: emit (c--)
{  HOUT putc ; }
: key (--n)
{ HIN getc ; }

: hexd (hexd--ascii) convert a hex digit to ascii
{ 
  $F and '0' +
  if( $39 over < ) 
    7 + 
  thanx ; 
}


: hexp (val,nybcnt--)
{
  times (
    28 ror
    dup hexd emit
  )
  drop ;
}
: . (val--)
{
  8 hexp ;
}
  

: ctell (ptr,cnt--)
{ times (
    c@++ emit
  )
  drop ;
}

: color (col--)
{  $1B emit
   "[0;3" ctell
   '0' + emit // output as ascii digit
   'm' emit
   ;
}