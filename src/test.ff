cd 'test

PROC deref // (refptr--head) find the head for this reference
{ 
    // walk the entire header list.  TOS=header; NOS=addr
    head'bottom begin
      if( dup head'ptr = ) dbl'drop 0 ; thanx  // exit on head'ptr
      if( dbl'dup head'code = ) 
        swap drop ;
      thanx 
      dup head'size +
    again
}
end

PROC deco1 // (ip--ip)
{
    dup U8'@++ // ptr,tok
    if( dup 0= )
      "CODE " ctell ;
    thanx
    4* over table'base + @ // ip,ref
    if( deref dup 0<> )
        head'name ctell space
    else
        drop "UNKNOWN " ctell
    thanx
    ;
}
end



